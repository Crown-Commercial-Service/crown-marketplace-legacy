<%= content_for :page_title, t('.question') %>

<%= add_optional_error_prefix_to_page_title(@journey.errors) %>
<div id="ccs-dynamic-accordian" class="govuk-grid-row">
  <%= render partial: 'shared/error_summary', locals: { errors: @journey.errors } %>
  <%= form_tag @form_path, method: :get do |f| %>
    <section class="govuk-grid-column-two-thirds">
      <%= hidden_fields_for_previous_steps_and_responses(@journey) %>
      <%= govuk_form_group_with_optional_error(@journey, :services) do %>
        <%= govuk_fieldset_with_optional_error(@journey, :services) do %>
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <span class="govuk-caption-m">
              <%= framework_lot_and_description(@journey.current_step.lot(params['lot']).number, @journey.current_step.lot(params['lot']).description) %>
            </span>
            <h1 class="govuk-fieldset__heading">
              <%= t('.question') %>
            </h1>
            <%= display_error(@journey, :services) %>
          </legend>
          <%= render partial: 'management_consultancy/rm6187/journey/mcf_services', locals: { services: @journey.current_step.services_for_lot(@journey.params['lot']) } %>
        <% end %>
      <% end %>
    </section>
    <section class="govuk-grid-column-one-third govuk-!-margin-top-9">
      <%= render partial: 'shared/basket', locals: { form: f, data_text_1:  t('.services_selected'), data_text_2: t('.no_services_selected'), data_text_3: t('.service_selected') } %>
    </section>
  <% end %>
</div>
